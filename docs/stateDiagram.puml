@startuml
[*] --> InitialState

state InitialState {
    [*] --> NotConnected
}

state NotConnected {
    [*] --> Connecting : User initiates connection
    Connecting --> Connected : Connection successful
    Connecting --> ErrorState : Connection failed
}

state Connected {
    [*] --> NotLoggedIn
    NotLoggedIn --> LoggingIn : User submits login info
    LoggingIn --> LoggedIn : Login successful
    LoggingIn --> ErrorState : Login failed

    state LoggedIn {
        [*] --> User : Normal user logged in
        User --> User : User performs actions (check balance, transfer)

        [*] --> Admin : Admin logged in
        Admin --> Admin : Admin performs actions (manage users, view data)
    }

    LoggedIn --> LoggingOut : User initiates logout
    LoggingOut --> NotLoggedIn : Logout successful
    LoggingOut --> ErrorState : Logout failed
}

state Disconnecting {
    [*] --> NotConnected : Disconnection successful
    [*] --> ErrorState : Disconnection failed
}

state ErrorState {
    [*] --> NotConnected : User retries connection
    [*] --> NotLoggedIn : User retries login
    [*] --> LoggedIn : User retries action
    [*] --> Disconnecting : User retries disconnection
}

Connected --> Disconnecting : User initiates disconnection
ErrorState --> Disconnecting : User initiates disconnection

@enduml
